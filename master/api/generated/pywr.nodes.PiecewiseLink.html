

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pywr.nodes.PiecewiseLink &mdash; Pywr 1.6.1.dev13+g64a67cd documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pywr.nodes.MultiSplitLink" href="pywr.nodes.MultiSplitLink.html" />
    <link rel="prev" title="pywr.nodes.BreakLink" href="pywr.nodes.BreakLink.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Pywr
          

          
          </a>

          
            
            
              <div class="version">
                1.6.1.dev13+g64a67cd
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing Pywr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../formulation.html">Problem formulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../json.html">JSON model format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending_pywr/index.html">Extending Pywr</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../pywr.html">Python API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../pywr.nodes.html">Nodes</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../pywr.nodes.html#nodes-classes">Nodes classes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.Node.html">pywr.nodes.Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.Link.html">pywr.nodes.Link</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.Input.html">pywr.nodes.Input</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.Output.html">pywr.nodes.Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.BreakLink.html">pywr.nodes.BreakLink</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">pywr.nodes.PiecewiseLink</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.MultiSplitLink.html">pywr.nodes.MultiSplitLink</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.Storage.html">pywr.nodes.Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.VirtualStorage.html">pywr.nodes.VirtualStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.AnnualVirtualStorage.html">pywr.nodes.AnnualVirtualStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.AggregatedStorage.html">pywr.nodes.AggregatedStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.nodes.AggregatedNode.html">pywr.nodes.AggregatedNode</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.Catchment.html">pywr.domains.river.Catchment</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.Reservoir.html">pywr.domains.river.Reservoir</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.River.html">pywr.domains.river.River</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.RiverSplit.html">pywr.domains.river.RiverSplit</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.RiverSplitWithGauge.html">pywr.domains.river.RiverSplitWithGauge</a></li>
<li class="toctree-l4"><a class="reference internal" href="pywr.domains.river.RiverGauge.html">pywr.domains.river.RiverGauge</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pywr.optimisation.html">pywr.optimisation package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pywr.parameters.html">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pywr.recorders.html">Recorders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pywr.solvers.html">pywr.solvers package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pywr.notebook.html">Notebook Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pywr</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../pywr.html">Pywr reference documentation.</a> &raquo;</li>
        
          <li><a href="../pywr.nodes.html">Nodes</a> &raquo;</li>
        
      <li>pywr.nodes.PiecewiseLink</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api/generated/pywr.nodes.PiecewiseLink.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pywr-nodes-piecewiselink">
<h1>pywr.nodes.PiecewiseLink<a class="headerlink" href="#pywr-nodes-piecewiselink" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="pywr.nodes.PiecewiseLink">
<em class="property">class </em><code class="sig-prename descclassname">pywr.nodes.</code><code class="sig-name descname">PiecewiseLink</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pywr.nodes.PiecewiseLink" title="Permalink to this definition">¶</a></dt>
<dd><p>An extension of Node that represents a non-linear Link with a piece wise cost function.</p>
<p>This object is intended to model situations where there is a benefit of supplying certain flow rates
but beyond a fixed limit there is a change in (or zero) cost.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>max_flow</strong><span class="classifier">iterable</span></dt><dd><p>A monotonic increasing list of maximum flows for the piece wise function</p>
</dd>
<dt><strong>cost</strong><span class="classifier">iterable</span></dt><dd><p>A list of costs corresponding to the max_flow steps</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This Node is implemented using a compound node structure like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="o">|</span> <span class="n">Separate</span> <span class="n">Domain</span>         <span class="o">|</span>
<span class="n">Output</span> <span class="o">-&gt;</span> <span class="n">Sublink</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="n">Sub</span> <span class="n">Output</span> <span class="o">-&gt;</span> <span class="n">Input</span>
       <span class="o">-&gt;</span> <span class="n">Sublink</span> <span class="mi">1</span> <span class="o">---^</span>
       <span class="o">...</span>             <span class="o">|</span>
       <span class="o">-&gt;</span> <span class="n">Sublink</span> <span class="n">n</span> <span class="o">---|</span>
</pre></div>
</div>
<p>This means routes do not directly traverse this node due to the separate
domain in the middle. Instead several new routes are made for each of
the sublinks and connections to the Output/Input node. The reason for this
breaking of the route is to avoid an geometric increase in the number
of routes when multiple PiecewiseLinks are present in the same route.</p>
<dl class="py method">
<dt id="pywr.nodes.PiecewiseLink.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">\*args</em>, <em class="sig-param">\*\*kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pywr.nodes.PiecewiseLink.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new Node object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>The model the node belongs to</p>
</dd>
<dt><strong>name</strong><span class="classifier">string</span></dt><dd><p>A unique name for the node</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywr.nodes.PiecewiseLink.__init__" title="pywr.nodes.PiecewiseLink.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(self, \*args, \*\*kwargs)</p></td>
<td><p>Initialise a new Node object</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">after</span></code>(self, timestep)</p></td>
<td><p>Set total flow on this link as sum of sublinks</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">before</span></code>()</p></td>
<td><p>Called at the beginning of the timestep</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check</span></code>(self)</p></td>
<td><p>Check the node is valid</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">commit</span></code>()</p></td>
<td><p>Called once for each route the node is a member of</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">commit_all</span></code>()</p></td>
<td><p>Called once for each route the node is a member of</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect</span></code>(self, node[, from_slot, to_slot])</p></td>
<td><p>Create an edge from this Node to another Node</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">disconnect</span></code>(self[, node, slot_name, all_slots])</p></td>
<td><p>Remove a connection from this Node to another Node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">finish</span></code>(self)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_conversion_factor</span></code>()</p></td>
<td><p>Get the conversion factor</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_cost</span></code>()</p></td>
<td><p>Get the cost per unit flow at a given timestep</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_max_flow</span></code>()</p></td>
<td><p>Get the maximum flow at a given timestep</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_min_flow</span></code>()</p></td>
<td><p>Get the minimum flow at a given timestep</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">iter_slots</span></code>(self[, slot_name, is_connector])</p></td>
<td><p>Returns the object(s) wich should be connected to given slot_name</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code>(data, model)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code>()</p></td>
<td><p>Called at the beginning of a run</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code>()</p></td>
<td><p>Called before the first run of the model</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">allow_isolated</span></code></p></td>
<td><p>A property to flag whether this Node can be unconnected in a network.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>comment: basestring</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">component_attrs</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">components</span></code></p></td>
<td><p>Generator that returns all of the Components attached to the Node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">conversion_factor</span></code></p></td>
<td><p>The conversion between inflow and outflow for the node</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p>The cost per unit flow via the node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">domain</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">flow</span></code></p></td>
<td><p>Total flow via this node in the current timestep</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">fully_qualified_name</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_flow</span></code></p></td>
<td><p>The maximum flow constraint on the node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">min_flow</span></code></p></td>
<td><p>The minimum flow constraint on the node</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">model</span></code></p></td>
<td><p>The recorder for the node, e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the node.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">parent</span></code></p></td>
<td><p>The parent Node/Storage of this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">prev_flow</span></code></p></td>
<td><p>Total flow via this node in the previous timestep</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">recorders</span></code></p></td>
<td><p>Returns a list of <cite>pywr.recorders.Recorder</cite> objects attached to this node.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">virtual</span></code></p></td>
<td><p>virtual: ‘bool’</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pywr.nodes.MultiSplitLink.html" class="btn btn-neutral float-right" title="pywr.nodes.MultiSplitLink" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pywr.nodes.BreakLink.html" class="btn btn-neutral float-left" title="pywr.nodes.BreakLink" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright (C) 2014-19 Joshua Arnott, James E. Tomlinson, Atkins, University of Manchester

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>